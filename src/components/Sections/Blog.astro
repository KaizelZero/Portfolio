---
import { getAllPosts, sortMDByDate } from '@/utils'
import Section from '@/components/Section.astro'
import PostPreview from '@/components/blog/PostPreview.astro'

const MAX_POSTS = 5
const allPosts = await getAllPosts()
const allPostsByDate = sortMDByDate(allPosts).slice(0, MAX_POSTS)
---

{
  allPostsByDate.length > 0 && (
    <Section title='Posts' seeMore link='/blog'>
      <ul class='flex flex-col gap-y-2'>
        {allPostsByDate.map((p) => (
          <li class='flex flex-col gap-x-2 sm:flex-row'>
            <PostPreview post={p} />
          </li>
        ))}
      </ul>
    </Section>
  )
}
